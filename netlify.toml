[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_GOOGLE_PLACES_API_KEY,GOOGLE_PLACES_API_KEY"
  SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"

[functions]
  directory = "netlify/functions"
  included_files = ["prisma/**"]

[functions."/api/orders"]
  [functions."/api/orders".always_on]
    enabled = true

[functions."/api/payments/create-order"]
  [functions."/api/payments/create-order".always_on]
    enabled = true

[functions."/api/payments/verify"]
  [functions."/api/payments/verify".always_on]
    enabled = true

[[plugins]]
  package = "@netlify/plugin-nextjs"
